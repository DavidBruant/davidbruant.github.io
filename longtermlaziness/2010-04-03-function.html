<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        
        <style> 
            *{
                box-sizing: border-box;
                -moz-box-sizing: border-box;
            }
        </style>
        
        <title> TITLE </title>    
    </head>
    
    <body>
        <header></header>
        <article><hr>
<p>title: '(function(){ … })();'
author: David Bruant
layout: post
permalink: /?p=10
categories:</p>
<h2 id="-uncategorized">  - Uncategorized</h2>
<p>The very first time I read <a href="http://jquery.com/">jQuery 1.3.2</a>‘s <a href="http://code.jquery.com/jquery-1.3.2.js">code</a>, the very first line surprised me :<br><code>(function(){</code></p>
<p>It didn’t take me a long time to discover that at the end of the library was the following :<br><code>})();</code></p>
<p>What are those symbols ? Is it some kind of mysterious signature of the author ? Why enclosing all the code within those “strings” ?</p>
<p><code>function(){}</code> is the definition of an anonymous function. The surrounding parenthesis and the <code>();</code> are here to call this function once.</p>
<p>Why creating a function to call it only once while JavaScript is a scripting language and as such, all the code in of the function could just be written outside of any function ?<br>The answer to this question can be found in one JavaScript weaknesses.</p>
<p>Each time a function or a variable is declared in the global context, the name of it is attached to the global object (the <code>window</code> object in a web browser). In C or Java, declaring a name in the global namespace, even if a bad practice, is not a big deal since when you declare a global variable or a function (or a class in Java) with the same name in different files, the compiler warns you and even refuses to compile. In JavaScript, if two functions with the same name are declared, the last one is the one that will be used. The former is forgotten without the least warning.</p>
<p>Without extra trick, in big enough applications with several JavaScript files, collisions are almost unavoidable. Obviously, this leads to weird bugs (“Dammit ! I called <code>changeState(newState)</code> and nothing changed !”) which take a lot of time to find and debug.</p>
<p>What helps avoiding global declaration is that within the scope of a function, you can declare variables and other function which are visible only inside of the function and not in the global context. So, within the scope of a function, you can use any variable and function name without risking any conflict with the global object (as long as you declare variables with <code>var</code> and functions with <code>function X(){}</code> or <code>var X = function(){...};</code>).</p>
<p>The idea of creating an anonymous function which is called only once is not very far.</p>
<p>No matter the version or the number of features, jQuery only uses two global variables : <code>$</code> and <code>jQuery</code>, dramatically reducing conflicts risks.</p>
</article>
        <footer></footer>
    </body>
</html>