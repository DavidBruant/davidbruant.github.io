<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        
        <style> 
            *{
                box-sizing: border-box;
                -moz-box-sizing: border-box;
            }
        </style>
        
        <title> TITLE </title>    
    </head>
    
    <body>
        <header></header>
        <article><hr>
<p>title: The name of a function
author: David Bruant
layout: post
permalink: /?p=36
categories:</p>
<h2 id="-uncategorized">  - Uncategorized</h2>
<p><em>Problem :</em> getting the name of a function for debugging purposes. The only thing available to do this is the function object.</p>
<h3 id="-f-name-"><code>f.name</code></h3>
<p>Very convenient and implemented in most browsers, the <a href="https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/Function/name">name property</a> provides the name. The only problem of this method is that it is not standard. It is not a part of ECMAScript 3 or 5.</p>
<h3 id="extracting-from-f-tostring-">Extracting from <code>f.toString()</code></h3>
<p>ECMAScript 3/5 <code>Function.prototype.toString()</code>:</p>
<blockquote>
<p>An implementation-dependent representation of the function is returned. This representation has the syntax of a <em>FunctionDeclaration</em>. Note in particular that the use and placement of white space, line terminators, and semicolons within the representation String is implementation-dependent.</p>
</blockquote>
<p>The grammar rule for <em>FunctionDeclaration</em> is :<br><code>function Identifier ( FormalParameterListopt ) { FunctionBody }</code></p>
<p>Pretty cool and standard. The following code returns the function name in any ECMAScript compliant environment :<br>[sourcecode language="javascript" light="true"]<br>function extractFunctionName(f){<br>var s = Function.prototype.toString.call(f); // f.toString may be overridden </p>
<p>var leftParenthesisIndex = s.indexOf(‘(‘);<br>var afterFunctionIndex = s.indexOf("function") + "function".length;</p>
<p>return afterFunctionIndex &lt; leftParenthesisIndex ?<br>s.substring(afterFunctionIndex, leftParenthesisIndex).trim():<br>"";<br>}<br>[/sourcecode]</p>
<h3 id="bonus-the-anonymous-function">Bonus : the anonymous function</h3>
<p>When asking to Firebug the following :<br>[sourcecode language="javascript" light="true"]<br>console.log( extractFunctionName( function(){} ) );<br>[/sourcecode]<br>The answer is “(an empty string)”. Hmm… Remember the <em>Identifier</em> earlier ?<br>The definition of <em>Identifier</em> is <em>IdentifierName but not reserved word</em>. <em>IdentifierName</em> is either <em>IdentifierStart</em> or<br><em>IdentifierName IdentifierPart</em>. In any case, an <em>IdentifierName</em> begins with an <em>IdentifierStart</em> which is :</p>
<blockquote>
<p>IdentifierStart ::<br>UnicodeLetter<br>$<br>_<br>UnicodeEscapeSequence</p>
</blockquote>
<p>To conclude, an <em>Identifier</em> cannot be empty.</p>
<p>I call this a standard bug! Luckily, the <a href="http://www.ecma-international.org/memento/TC39.htm">TC-39 committee</a> is <a href="https://mail.mozilla.org/pipermail/es5-discuss/2009-May/002532.html">fully aware</a> of it</p>
</article>
        <footer></footer>
    </body>
</html>